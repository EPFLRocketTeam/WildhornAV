#### Tools
TOOL=arm-linux-gnueabihf-
CC=$(TOOL)gcc
LD=$(TOOL)ld
OBJCOPY=$(TOOL)objcopy
TARGET=hello
SRC=$(wildcard *.c)
OBJ=$(SRC:.c=.o)
####

all: $(TARGET)

$(TARGET): $(OBJ) crt0.o
	$(CC) -g -T asm.lds -o $@ $^
	$(OBJCOPY) -O binary $@ $@.bin

crt0.o: crt0.S
	$(CC) -g -c $< -marm

%.o: %.c
	$(CC) -g -c $< -I. -marm

clean:
	rm -f *.o *.bin $(TARGET)

